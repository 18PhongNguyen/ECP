import './polyfills.server.mjs';
import{a as I}from"./chunk-JOWJTQVX.mjs";import{a as F}from"./chunk-IYAE6LI4.mjs";import{c as i,f as S,g as h,h as w,i as p,j as y,m as L,o as N,q as R}from"./chunk-FOJHXEVK.mjs";import"./chunk-V3QKBDNW.mjs";import{E as u,Ea as g,Fb as v,Pa as s,Rb as b,Ua as f,Ub as C,aa as t,ba as a,na as o,va as m,wa as l,xa as d}from"./chunk-FWOWWAD4.mjs";import"./chunk-5XUXGTUW.mjs";var x=class c{constructor(r,e,n){this.accountService=r;this.router=e;this.activatedRoute=n}loginForm;returnUrl;ngOnInit(){this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop",this.createLoginForm()}createLoginForm(){this.loginForm=new w({email:new p("",[i.required,i.pattern(/^[\w\.=-]+@[\w\.-]+\.[\w]{2,3}$/)]),password:new p("",[i.required,i.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W_]).{8,50}$/)])})}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.router.navigateByUrl("/shop"),console.log("Login successful")},error:r=>{console.error("Login failed",r)}})}static \u0275fac=function(e){return new(e||c)(a(F),a(C),a(b))};static \u0275cmp=u({type:c,selectors:[["app-login"]],standalone:!0,features:[f],decls:10,vars:5,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[1,"form-signin",3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"h3","mb-3","font-weight-normal"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block",2,"width","100%",3,"disabled"]],template:function(e,n){e&1&&(m(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return n.onSubmit()}),m(3,"div",3)(4,"h1",4),s(5,"Login"),l()(),d(6,"app-text-input",5)(7,"app-text-input",6),m(8,"button",7),s(9,"Sign in"),l()()()()),e&2&&(t(2),o("formGroup",n.loginForm),t(4),o("label","Email address"),t(),o("label","Password")("type","password"),t(),o("disabled",n.loginForm.invalid))},dependencies:[R,y,S,h,L,N,v,I]})};export{x as LoginComponent};
