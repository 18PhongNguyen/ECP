import './polyfills.server.mjs';
import{a as ee,b as te,h as O}from"./chunk-PSWEC2SU.mjs";import"./chunk-FOJHXEVK.mjs";import{c as W,j as Z}from"./chunk-PTIVCX52.mjs";import"./chunk-ITM4QXC2.mjs";import{a as ne}from"./chunk-GRY6XTD2.mjs";import{a as X}from"./chunk-KLK6LP3Q.mjs";import"./chunk-V3QKBDNW.mjs";import{$ as D,$a as q,Ba as v,E as g,Ea as l,Eb as G,Fa as c,Fb as x,Hb as J,Ia as N,J as h,Ja as B,K as f,La as H,Ma as A,N as V,Na as $,Pa as p,Qa as b,Ra as P,Sa as Q,U as j,Ua as _,Vb as K,Yb as w,_a as U,aa as a,ba as S,la as d,na as s,pa as E,va as o,wa as r,xa as C,xb as Y,ya as R,yb as I,za as L}from"./chunk-FWOWWAD4.mjs";import"./chunk-5XUXGTUW.mjs";var T=class n{constructor(t){this.basketService=t}product={id:0,name:"",description:"",price:0,pictureUrl:"",productType:"",productBrand:""};addItemToBasket(){this.basketService.addItemToBasket(this.product)}static \u0275fac=function(e){return new(e||n)(S(X))};static \u0275cmp=g({type:n,selectors:[["app-product-item"]],inputs:{product:"product"},standalone:!0,features:[_],decls:17,vars:10,consts:[[1,"card","h-100","shadow-sm"],[1,"image-container"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img-fluid",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],["type","button",1,"btn","btn-primary","me-2",3,"click"],[1,"fa","fa-shopping-cart"],["type","button",1,"btn","btn-primary",3,"routerLink"],[1,"name-container"],[1,"text-decoration-none",3,"routerLink"],[1,"text-uppercase"],[1,"card-body","d-flex","flex-column","justify-content-end"],[1,"mb-2"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),C(3,"img",3),o(4,"div",4)(5,"button",5),l("click",function(){return i.addItemToBasket()}),C(6,"i",6),r(),o(7,"button",7),p(8,"View"),r()()()(),o(9,"div",8)(10,"a",9)(11,"h6",10),p(12),r()()(),o(13,"div",11)(14,"span",12),p(15),U(16,"currency"),r()()()),e&2&&(a(3),N("src",i.product.pictureUrl,D),N("alt",i.product.name),a(4),B("routerLink","/shop/",i.product.id,""),a(3),B("routerLink","/shop/",i.product.id,""),a(2),b(i.product.name),a(3),b(q(16,8,i.product.price)))},dependencies:[x,G,w,K],styles:[".btn[_ngcontent-%COMP%]{width:30%;height:40px}.image-container[_ngcontent-%COMP%]{height:250px;overflow:hidden}.image[_ngcontent-%COMP%]{position:relative;height:100%;display:flex;align-items:center;justify-content:center}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;object-position:center}.name-container[_ngcontent-%COMP%]{height:70px;padding:10px 18px;display:flex;align-items:center}.name-container[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;line-height:1.3;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;text-overflow:ellipsis;font-size:.95rem}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:#ffffff80;opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:1000;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{transform:translate(-20px)}.hover-overlaybottom[_ngcontent-%COMP%]:last-of-type{transform:translate(20px)}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;margin-bottom:15px;box-shadow:0 4px 8px #0000001a;border-radius:8px;overflow:hidden;transition:transform .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #00000026}.card-body[_ngcontent-%COMP%]{flex-grow:0;padding:12px 18px;margin-top:auto}.card-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}"]})};var y=class{brandId=0;typeId=0;sort="name";pageNumber=1;pageSize=6;search=""};function re(n,t){if(n&1&&(o(0,"span"),p(1," Showing "),o(2,"strong"),p(3),r(),p(4," of "),o(5,"strong"),p(6),r(),p(7," Results"),r()),n&2){let e=c();a(3),Q(" ",(e.pageNumber-1)*e.pageSize+1," - ",e.pageNumber*e.pageSize>e.totalCount?e.totalCount:e.pageNumber*e.pageSize," "),a(3),b(e.totalCount)}}function ae(n,t){n&1&&(o(0,"span"),p(1," There are "),o(2,"strong"),p(3,"0"),r(),p(4," Results was found "),r())}var M=class n{pageNumber=1;pageSize=6;totalCount=0;ngOnInit(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-paging-header"]],inputs:{pageNumber:"pageNumber",pageSize:"pageSize",totalCount:"totalCount"},standalone:!0,features:[_],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(e,i){e&1&&(o(0,"header"),d(1,re,8,3,"span",0)(2,ae,5,0,"span",0),r()),e&2&&(a(),s("ngIf",i.totalCount&&i.totalCount>0),a(),s("ngIf",i.totalCount===0))},dependencies:[x,I,te]})};var k=class n{totalCount=0;pageSize=6;pageChanged=new V;ngOnInit(){}onPagerChange(t){this.pageChanged.emit(t.page)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-pager"]],inputs:{totalCount:"totalCount",pageSize:"pageSize"},outputs:{pageChanged:"pageChanged"},standalone:!0,features:[_],decls:1,vars:3,consts:[["previousText","\u2039","nextText","\u203A","firstText","\xAB","lastText","\xBB",3,"pageChanged","boundaryLinks","totalItems","itemsPerPage"]],template:function(e,i){e&1&&(o(0,"pagination",0),l("pageChanged",function(u){return i.onPagerChange(u)}),r()),e&2&&s("boundaryLinks",!0)("totalItems",i.totalCount)("itemsPerPage",i.pageSize)},dependencies:[O,ee]})};var pe=["search"];function se(n,t){if(n&1&&(o(0,"option",15),p(1),r()),n&2){let e=t.$implicit;s("value",e.value),a(),P(" ",e.name," ")}}function me(n,t){if(n&1){let e=v();o(0,"li",16),l("click",function(){let m=h(e).$implicit,u=c(2);return f(u.onBrandSelected(m.id))}),p(1),r()}if(n&2){let e=t.$implicit,i=c(2);E("active",e.id===i.shopParams.brandId),s("value",e.id),a(),P(" ",e.name," ")}}function ce(n,t){if(n&1){let e=v();o(0,"li",16),l("click",function(){let m=h(e).$implicit,u=c(2);return f(u.onTypeSelected(m.id))}),p(1),r()}if(n&2){let e=t.$implicit,i=c(2);E("active",e.id===i.shopParams.typeId),s("value",e.id),a(),P(" ",e.name," ")}}function le(n,t){if(n&1){let e=v();R(0),o(1,"h5",9),p(2,"Sort"),r(),o(3,"select",10),l("change",function(m){h(e);let u=c();return f(u.onSortSelected(m.target.value))}),d(4,se,2,2,"option",11),r(),o(5,"h5",12),p(6,"Brands"),r(),o(7,"ul",13),d(8,me,2,4,"li",14),r(),o(9,"h5",12),p(10,"Types"),r(),o(11,"ul",13),d(12,ce,2,4,"li",14),r(),L()}if(n&2){let e=c();a(4),s("ngForOf",e.sortOptions),a(4),s("ngForOf",e.brands),a(4),s("ngForOf",e.types)}}function de(n,t){if(n&1){let e=v();o(0,"div",17),C(1,"app-paging-header",18),o(2,"div",19)(3,"input",20,0),l("keyup.enter",function(){h(e);let m=c();return f(m.onSearch())}),r(),o(5,"button",21),l("click",function(){h(e);let m=c();return f(m.onSearch())}),p(6,"Search"),r(),o(7,"button",22),l("click",function(){h(e);let m=c();return f(m.onReset())}),p(8,"Reset"),r()()()}if(n&2){let e=c();a(),s("totalCount",e.totalCount)("pageSize",e.shopParams.pageSize)("pageNumber",e.shopParams.pageNumber)}}function ue(n,t){if(n&1&&(o(0,"div",23),C(1,"app-product-item",24),r()),n&2){let e=t.$implicit;a(),s("product",e)}}function ge(n,t){if(n&1){let e=v();o(0,"div",25)(1,"app-pager",26),l("pageChanged",function(m){h(e);let u=c();return f(u.onPageChanged(m))}),r()()}if(n&2){let e=c();a(),s("totalCount",e.totalCount)("pageSize",e.shopParams.pageSize)}}var oe=class n{constructor(t,e){this.shopService=t;this.platformId=e}searchTerm;products=[];brands=[];types=[];shopParams=new y;totalCount=0;sortOptions=[{name:"Alphabetical",value:"name"},{name:"Price: Low to High",value:"priceAsc"},{name:"Price: High to Low",value:"priceDesc"}];isBrowser=!1;ngOnInit(){this.isBrowser=J(this.platformId),this.isBrowser&&console.log("Running on browser"),this.getProducts(),this.getBrands(),this.getTypes()}getProducts(){this.shopService.getProducts(this.shopParams).subscribe({next:t=>{this.products=t.data,this.shopParams.pageNumber=t.pageIndex,this.shopParams.pageSize=t.pageSize,this.totalCount=t.count},error:t=>{console.error("Error fetching products:",t)},complete:()=>{console.log("Fetch completed")}})}getBrands(){this.shopService.getBrands().subscribe({next:t=>{this.brands=[{id:0,name:"All"},...t]},error:t=>{console.error("Error fetching brands:",t)},complete:()=>{console.log("Fetch completed")}})}getTypes(){this.shopService.getTypes().subscribe({next:t=>{this.types=[{id:0,name:"All"},...t]},error:t=>{console.error("Error fetching types:",t)},complete:()=>{console.log("Fetch completed")}})}onBrandSelected(t){this.shopParams.brandId=t,this.shopParams.pageNumber=1,this.getProducts()}onTypeSelected(t){this.shopParams.typeId=t,this.shopParams.pageNumber=1,this.getProducts()}onSortSelected(t){this.shopParams.sort=t,this.getProducts()}onPageChanged(t){this.shopParams.pageNumber!==t&&(this.shopParams.pageNumber=t,this.getProducts())}onSearch(){this.shopParams.search=this.searchTerm.nativeElement.value,this.shopParams.pageNumber=1,this.getProducts()}onReset(){this.searchTerm.nativeElement.value="",this.shopParams=new y,this.getProducts()}static \u0275fac=function(e){return new(e||n)(S(ne),S(j))};static \u0275cmp=g({type:n,selectors:[["app-shop"]],viewQuery:function(e,i){if(e&1&&H(pe,5),e&2){let m;A(m=$())&&(i.searchTerm=m.first)}},standalone:!0,features:[_],decls:9,vars:4,consts:[["search",""],[1,"container","mt-3"],[1,"row"],[1,"col-3"],[4,"ngIf"],[1,"col-9"],["class","d-flex justify-content-between align-items-center pb-2",4,"ngIf"],["class","col-4 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"text-warning","ms-3","mt-4","mb-3"],[1,"form-select","mb-4",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"text-warning","ms-3"],[1,"list-group","my-3"],["class","list-group-item",3,"active","value","click",4,"ngFor","ngForOf"],[3,"value"],[1,"list-group-item",3,"click","value"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageSize","pageNumber"],[1,"d-flex","align-items-center"],["type","text","placeholder","Search",1,"form-control","me-2",2,"width","300px",3,"keyup.enter"],[1,"btn","btn-outline-primary","my-2",3,"click"],[1,"btn","btn-outline-success","my-2","ms-2",3,"click"],[1,"col-4","mb-4"],[3,"product"],[1,"d-flex","justify-content-center"],[3,"pageChanged","totalCount","pageSize"]],template:function(e,i){e&1&&(o(0,"div",1)(1,"div",2)(2,"section",3),d(3,le,13,3,"ng-container",4),r(),o(4,"section",5),d(5,de,9,3,"div",6),o(6,"div",2),d(7,ue,2,1,"div",7),r(),d(8,ge,2,2,"div",8),r()()()),e&2&&(a(3),s("ngIf",(i.types==null?null:i.types.length)&&(i.brands==null?null:i.brands.length)),a(2),s("ngIf",i.products==null?null:i.products.length),a(2),s("ngForOf",i.products),a(),s("ngIf",i.totalCount&&i.totalCount>0))},dependencies:[x,Y,I,T,O,M,k,W,w,Z]})};export{oe as ShopComponent};
