import './polyfills.server.mjs';
import{a as ge}from"./chunk-JOWJTQVX.mjs";import{a as gt}from"./chunk-GBSDSALM.mjs";import{a as ue}from"./chunk-IYAE6LI4.mjs";import{b as yt,c as _t,d as St,e as He,f as fe,g as Tt,h as ve}from"./chunk-PSWEC2SU.mjs";import{b as Ct,c as x,f as V,g as G,k as bt,m as z,n as U,o as q,p as he,q as M}from"./chunk-FOJHXEVK.mjs";import{a as ft,b as je,c as ce,d as le,e as Be}from"./chunk-ITM4QXC2.mjs";import{a as kt,b as xt}from"./chunk-S57SSTOP.mjs";import{a as L}from"./chunk-KLK6LP3Q.mjs";import{a as pe}from"./chunk-V3QKBDNW.mjs";import{$a as lt,A as N,Aa as it,Ab as dt,B as H,Ba as F,Da as ot,E as C,Ea as y,Eb as pt,Fa as u,Fb as k,I as Xe,Ia as Ae,J as I,Ja as nt,K as E,Kb as ut,La as oe,M as ie,Ma as ne,Na as re,O as Oe,Oa as rt,P as De,Pa as d,Pb as ht,Qa as K,Ra as O,Sa as st,Ta as at,Ua as b,Ub as me,Vb as de,Yb as vt,Z as Ke,_ as Ne,_a as ct,aa as a,b as D,ba as p,da as Ye,eb as se,h as $e,i as We,ia as W,ja as et,jb as mt,la as v,ma as J,na as l,oa as X,pa as tt,qa as w,tb as Pe,va as r,wa as s,x as B,xa as m,xb as ae,ya as Me,yb as _,z as Je,za as Re}from"./chunk-FWOWWAD4.mjs";import{a as T,b as j,h as te}from"./chunk-5XUXGTUW.mjs";function Vt(n,i){if(n&1&&(r(0,"button",5),d(1," View your order "),s()),n&2){let e=u();nt("routerLink","/orders/",e.order.id,"")}}function Gt(n,i){n&1&&(r(0,"button",6),d(1," View your orders "),s())}var Ce=class n{constructor(i){this.router=i;let e=this.router.getCurrentNavigation();this.order=e?.extras?.state}order;static \u0275fac=function(e){return new(e||n)(p(me))};static \u0275cmp=C({type:n,selectors:[["app-checkout-success"]],standalone:!0,features:[b],decls:9,vars:2,consts:[[1,"container","mt-5"],[1,"fa","fa-check-circle","fa-5x",2,"color","green"],[1,"mb-4"],["class","btn btn-outline-success",3,"routerLink",4,"ngIf"],["routerLink","/orders","class","btn btn-outline-success",4,"ngIf"],[1,"btn","btn-outline-success",3,"routerLink"],["routerLink","/orders",1,"btn","btn-outline-success"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div"),m(2,"i",1),s(),r(3,"h2"),d(4,"Thank you. Your order is confirmed"),s(),r(5,"p",2),d(6,"Your order has not shipped yet, but this is to be expected as we are not a real store!"),s(),v(7,Vt,2,2,"button",3)(8,Gt,2,0,"button",4),s()),e&2&&(a(7),l("ngIf",t.order),a(),l("ngIf",!t.order))},dependencies:[k,_,vt,de]})};function zt(n,i){if(n&1){let e=F();r(0,"li",4)(1,"div",5)(2,"button",6),y("click",function(){let o=I(e).index,c=u();return E(c.onClick(o))}),d(3),s()()()}if(n&2){let e=i.$implicit,t=i.index,o=u();a(2),tt("active",o.selectedIndex===t),l("disabled",!1),a(),O(" ",e.label," ")}}function Ut(n,i){if(n&1&&(r(0,"div"),it(1,7),s()),n&2){let e=u();a(),l("ngTemplateOutlet",e.selected.content)}}var ye=class n extends He{constructor(e,t,o){super(t,e,o);this.cdr=e;this.dir=t;this.elRef=o}linearModeSelected=!0;ngOnInit(){this.linear=this.linearModeSelected}onClick(e){this.selectedIndex=e}next(){this.selectedIndex<this.steps.length-1&&(this.selectedIndex=this.selectedIndex+1,this._stateChanged())}previous(){this.selectedIndex>0&&(this.selectedIndex=this.selectedIndex-1,this._stateChanged())}reset(){this.selectedIndex=0,this._stateChanged()}_stateChanged(){super._stateChanged()}static \u0275fac=function(t){return new(t||n)(p(mt),p(_t),p(De))};static \u0275cmp=C({type:n,selectors:[["app-stepper"]],inputs:{linearModeSelected:"linearModeSelected"},standalone:!0,features:[at([{provide:He,useExisting:n}]),et,b],decls:4,vars:2,consts:[[1,"container"],[1,"nav","nav-pills","nav-justified"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[1,"d-grid"],[1,"nav-link","py-3","text-uppercase","fw-bold",3,"click","disabled"],[3,"ngTemplateOutlet"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"ul",1),v(2,zt,4,4,"li",2),s(),v(3,Ut,2,1,"div",3),s()),t&2&&(a(2),l("ngForOf",o.steps),a(),l("ngIf",o.selected))},dependencies:[k,ae,_,dt],styles:["button.nav-link[_ngcontent-%COMP%]{background:#e9ecef;border-radius:0;border:none;color:#333}button.nav-link[_ngcontent-%COMP%]:disabled:not(.active){color:#333;background:#e9ecef}"]})};var It=["toast-component",""];function qt(n,i){if(n&1){let e=F();r(0,"button",5),y("click",function(){I(e);let o=u();return E(o.remove())}),r(1,"span",6),d(2,"\xD7"),s()()}}function Zt(n,i){if(n&1&&(Me(0),d(1),Re()),n&2){let e=u(2);a(),O("[",e.duplicatesCount+1,"]")}}function Qt(n,i){if(n&1&&(r(0,"div"),d(1),v(2,Zt,2,1,"ng-container",4),s()),n&2){let e=u();w(e.options.titleClass),J("aria-label",e.title),a(),O(" ",e.title," "),a(),l("ngIf",e.duplicatesCount)}}function $t(n,i){if(n&1&&m(0,"div",7),n&2){let e=u();w(e.options.messageClass),l("innerHTML",e.message,Ne)}}function Wt(n,i){if(n&1&&(r(0,"div",8),d(1),s()),n&2){let e=u();w(e.options.messageClass),J("aria-label",e.message),a(),O(" ",e.message," ")}}function Jt(n,i){if(n&1&&(r(0,"div"),m(1,"div",9),s()),n&2){let e=u();a(),X("width",e.width()+"%")}}function Xt(n,i){if(n&1){let e=F();r(0,"button",5),y("click",function(){I(e);let o=u();return E(o.remove())}),r(1,"span",6),d(2,"\xD7"),s()()}}function Kt(n,i){if(n&1&&(Me(0),d(1),Re()),n&2){let e=u(2);a(),O("[",e.duplicatesCount+1,"]")}}function Yt(n,i){if(n&1&&(r(0,"div"),d(1),v(2,Kt,2,1,"ng-container",4),s()),n&2){let e=u();w(e.options.titleClass),J("aria-label",e.title),a(),O(" ",e.title," "),a(),l("ngIf",e.duplicatesCount)}}function ei(n,i){if(n&1&&m(0,"div",7),n&2){let e=u();w(e.options.messageClass),l("innerHTML",e.message,Ne)}}function ti(n,i){if(n&1&&(r(0,"div",8),d(1),s()),n&2){let e=u();w(e.options.messageClass),J("aria-label",e.message),a(),O(" ",e.message," ")}}function ii(n,i){if(n&1&&(r(0,"div"),m(1,"div",9),s()),n&2){let e=u();a(),X("width",e.width()+"%")}}var Le=class{_attachedHost;component;viewContainerRef;injector;constructor(i,e){this.component=i,this.injector=e}attach(i,e){return this._attachedHost=i,i.attach(this,e)}detach(){let i=this._attachedHost;if(i)return this._attachedHost=void 0,i.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(i){this._attachedHost=i}},Ve=class{_attachedPortal;_disposeFn;attach(i,e){return this._attachedPortal=i,this.attachComponentPortal(i,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(i){this._disposeFn=i}},Ge=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new D;_activate=new D;_manualClose=new D;_resetTimeout=new D;_countDuplicate=new D;constructor(i){this._overlayRef=i}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(i,e){i&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},Q=class{toastId;config;message;title;toastType;toastRef;_onTap=new D;_onAction=new D;constructor(i,e,t,o,c,h){this.toastId=i,this.config=e,this.message=t,this.title=o,this.toastType=c,this.toastRef=h,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(i){this._onAction.next(i)}onAction(){return this._onAction.asObservable()}},Et={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},oi=new Je("ToastConfig"),ze=class extends Ve{_hostDomElement;_componentFactoryResolver;_appRef;constructor(i,e,t){super(),this._hostDomElement=i,this._componentFactoryResolver=e,this._appRef=t}attachComponentPortal(i,e){let t=this._componentFactoryResolver.resolveComponentFactory(i.component),o;return o=t.create(i.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(i){return i.hostView.rootNodes[0]}},ni=(()=>{class n{_document=H(Pe);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ue=class{_portalHost;constructor(i){this._portalHost=i}attach(i,e=!0){return this._portalHost.attach(i,e)}detach(){return this._portalHost.detach()}},ri=(()=>{class n{_overlayContainer=H(ni);_componentFactoryResolver=H(Ye);_appRef=H(se);_document=H(Pe);_paneElements=new Map;create(e,t){return this._createOverlayRef(this.getPaneElement(e,t))}getPaneElement(e="",t){return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[e]||(this._paneElements.get(t)[e]=this._createPaneElement(e,t)),this._paneElements.get(t)[e]}_createPaneElement(e,t){let o=this._document.createElement("div");return o.id="toast-container",o.classList.add(e),o.classList.add("toast-container"),t?t.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(e){return new ze(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new Ue(this._createPortalHost(e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,t,o,c,h){this.overlay=t,this._injector=o,this.sanitizer=c,this.ngZone=h,this.toastrConfig=T(T({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=T(T({},e.default.iconClasses),e.config.iconClasses))}show(e,t,o={},c=""){return this._preBuildNotification(c,e,t,this.applyConfig(o))}success(e,t,o={}){let c=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(c,e,t,this.applyConfig(o))}error(e,t,o={}){let c=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(c,e,t,this.applyConfig(o))}info(e,t,o={}){let c=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(c,e,t,this.applyConfig(o))}warning(e,t,o={}){let c=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(c,e,t,this.applyConfig(o))}clear(e){for(let t of this.toasts)if(e!==void 0){if(t.toastId===e){t.toastRef.manualClose();return}}else t.toastRef.manualClose()}remove(e){let t=this._findToast(e);if(!t||(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(e="",t="",o,c){let{includeTitleDuplicates:h}=this.toastrConfig;for(let g of this.toasts){let S=h&&g.title===e;if((!h||S)&&g.message===t)return g.toastRef.onDuplicate(o,c),g}return null}applyConfig(e={}){return T(T({},this.toastrConfig),e)}_findToast(e){for(let t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===e)return{index:t,activeToast:this.toasts[t]};return null}_preBuildNotification(e,t,o,c){return c.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,t,o,c)):this._buildNotification(e,t,o,c)}_buildNotification(e,t,o,c){if(!c.toastComponent)throw new Error("toastComponent required");let h=this.findDuplicate(o,t,this.toastrConfig.resetTimeoutOnDuplicate&&c.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||t)&&this.toastrConfig.preventDuplicates&&h!==null)return h;this.previousToastMessage=t;let g=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(g=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let S=this.overlay.create(c.positionClass,this.overlayContainer);this.index=this.index+1;let P=t;t&&c.enableHtml&&(P=this.sanitizer.sanitize(Ke.HTML,t));let f=new Ge(S),we=new Q(this.index,c,P,o,e,f),jt=[{provide:Q,useValue:we}],Bt=ie.create({providers:jt,parent:this._injector}),Ht=new Le(c.toastComponent,Bt),Qe=S.attach(Ht,c.newestOnTop);f.componentInstance=Qe.instance;let Fe={toastId:this.index,title:o||"",message:t||"",toastRef:f,onShown:f.afterActivate(),onHidden:f.afterClosed(),onTap:we.onTap(),onAction:we.onAction(),portal:Qe};return g||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Fe.toastRef.activate()})),this.toasts.push(Fe),Fe}static \u0275fac=function(t){return new(t||n)(N(oi),N(ri),N(ie),N(ht),N(Oe))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),si=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=W(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,t,o){this.toastrService=e,this.toastPackage=t,this.ngZone=o,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(c=>{this.duplicatesCount=c}),this.state=W({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(e=>j(T({},e),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),t=this.hideTime-e;this.width.set(t/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(e=>j(T({},e),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(e=>j(T({},e),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),t)):this.timeout=setTimeout(()=>e(),t)}outsideInterval(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),t)):this.intervalId=setInterval(()=>e(),t)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(t){return new(t||n)(p(A),p(Q),p(Oe))};static \u0275cmp=C({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,o){t&1&&y("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),t&2&&(ot("@flyInOut",o._state),w(o.toastClasses),X("display",o.displayStyle))},standalone:!0,features:[b],attrs:It,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,o){t&1&&v(0,qt,3,0,"button",0)(1,Qt,3,5,"div",1)(2,$t,1,3,"div",2)(3,Wt,2,4,"div",3)(4,Jt,2,2,"div",4),t&2&&(l("ngIf",o.options.closeButton),a(),l("ngIf",o.title),a(),l("ngIf",o.message&&o.options.enableHtml),a(),l("ngIf",o.message&&!o.options.enableHtml),a(),l("ngIf",o.options.progressBar))},dependencies:[_],encapsulation:2,data:{animation:[ft("flyInOut",[le("inactive",ce({opacity:0})),le("active",ce({opacity:1})),le("removed",ce({opacity:0})),Be("inactive => active",je("{{ easeTime }}ms {{ easing }}")),Be("active => removed",je("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})(),to=j(T({},Et),{toastComponent:si});var ai=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=W(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=W("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,t,o){this.toastrService=e,this.toastPackage=t,this.appRef=o,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(c=>{this.duplicatesCount=c})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),t=this.hideTime-e;this.width.set(t/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(t){return new(t||n)(p(A),p(Q),p(se))};static \u0275cmp=C({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,o){t&1&&y("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),t&2&&(w(o.toastClasses),X("display",o.displayStyle))},standalone:!0,features:[b],attrs:It,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,o){t&1&&v(0,Xt,3,0,"button",0)(1,Yt,3,5,"div",1)(2,ei,1,3,"div",2)(3,ti,2,4,"div",3)(4,ii,2,2,"div",4),t&2&&(l("ngIf",o.options.closeButton),a(),l("ngIf",o.title),a(),l("ngIf",o.message&&o.options.enableHtml),a(),l("ngIf",o.message&&!o.options.enableHtml),a(),l("ngIf",o.options.progressBar))},dependencies:[_],encapsulation:2,changeDetection:0})}return n})(),io=j(T({},Et),{toastComponent:ai});function mi(n,i){if(n&1){let e=F();r(0,"div",6)(1,"div",7)(2,"h4"),d(3,"Shipping address"),s(),r(4,"button",8),y("click",function(){I(e);let o=u();return E(o.saveUserAddress())}),d(5," Save as default address "),s()(),r(6,"div",9)(7,"div",10),m(8,"app-text-input",11),s(),r(9,"div",10),m(10,"app-text-input",12),s(),r(11,"div",10),m(12,"app-text-input",13),s(),r(13,"div",10),m(14,"app-text-input",14),s(),r(15,"div",10),m(16,"app-text-input",15),s(),r(17,"div",10),m(18,"app-text-input",16),s()()()}if(n&2){let e,t=u();l("formGroup",t.checkoutForm),a(4),l("disabled",!((e=t.checkoutForm.get("addressForm"))!=null&&e.valid)||!((e=t.checkoutForm.get("addressForm"))!=null&&e.dirty)),a(4),l("label","First name"),a(2),l("label","Last name"),a(2),l("label","Street"),a(2),l("label","City"),a(2),l("label","State"),a(2),l("label","Zip code")}}var _e=class n{constructor(i,e,t){this.accountService=i;this.toastr=e;this.fb=t}checkoutForm;ngOnInit(){}saveUserAddress(){this.accountService.updateUserAddress(this.checkoutForm?.get("addressForm")?.value).subscribe({next:()=>{this.toastr.success("Address saved"),this.checkoutForm?.get("addressForm")?.reset(this.checkoutForm?.get("addressForm")?.value)},error:i=>{console.error("Error saving address:",i),this.toastr.error(i.message||"Failed to save address")}})}static \u0275fac=function(e){return new(e||n)(p(ue),p(A),p(he))};static \u0275cmp=C({type:n,selectors:[["app-checkout-address"]],inputs:{checkoutForm:"checkoutForm"},standalone:!0,features:[b],decls:8,vars:2,consts:[["class","mt-4",3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["routerLink","/basket",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],["cdkStepperNext","",1,"btn","btn-primary",3,"disabled"],[1,"fa","fa-angle-right"],[1,"mt-4",3,"formGroup"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-outline-success","mb-3",3,"click","disabled"],["formGroupName","addressForm",1,"row"],[1,"form-group","col-6"],["formControlName","firstName",3,"label"],["formControlName","lastName",3,"label"],["formControlName","street",3,"label"],["formControlName","city",3,"label"],["formControlName","state",3,"label"],["formControlName","zipcode",3,"label"]],template:function(e,t){if(e&1&&(v(0,mi,19,8,"div",0),r(1,"div",1)(2,"button",2),m(3,"i",3),d(4," Back to basket "),s(),r(5,"button",4),d(6," Go to Delivery "),m(7,"i",5),s()()),e&2){let o;l("ngIf",t.checkoutForm),a(5),l("disabled",t.checkoutForm==null||(o=t.checkoutForm.get("addressForm"))==null?null:o.invalid)}},dependencies:[ve,fe,ge,k,_,M,V,G,z,q,U,de]})};var $=class n{constructor(i){this.http=i}baseUrl=pe.apiUrl;createOrder(i){return this.http.post(this.baseUrl+"orders",i)}getDeliveryMethods(){return this.http.get(this.baseUrl+"orders/deliveryMethods").pipe(We(i=>i.sort((e,t)=>t.price-e.price)))}static \u0275fac=function(e){return new(e||n)(N(ut))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function di(n,i){if(n&1){let e=F();r(0,"div",9)(1,"div",10)(2,"input",11),y("change",function(){let o=I(e).$implicit,c=u(2);return E(c.setShippingPrice(o))}),s(),r(3,"label",12)(4,"strong"),d(5),ct(6,"currency"),s(),m(7,"br"),r(8,"span",13),d(9),s(),m(10,"br"),r(11,"small",14),d(12),s()()()()}if(n&2){let e=i.$implicit;a(2),Ae("id",e.id),l("value",e.id),a(),Ae("for",e.id),a(2),st("",e.shortName," - ",lt(6,7,e.price),""),a(4),K(e.description),a(3),K(e.deliveryTime)}}function pi(n,i){if(n&1&&(r(0,"div",6)(1,"h4"),d(2,"Choose delivery method"),s(),r(3,"div",7),v(4,di,13,9,"div",8),s()()),n&2){let e=u();l("formGroup",e.checkoutForm),a(4),l("ngForOf",e.deliveryMethods)}}var Se=class n{constructor(i,e){this.checkoutService=i;this.basketService=e}checkoutForm;deliveryMethods;ngOnInit(){this.getDeliveryMethods()}getDeliveryMethods(){this.checkoutService.getDeliveryMethods().subscribe({next:i=>{console.log("Delivery methods loaded:",i),this.deliveryMethods=i},error:i=>{console.error("Error fetching delivery methods",i)}})}setShippingPrice(i){if(this.checkoutForm){let e=this.checkoutForm.get("deliveryForm");e&&(e.get("deliveryMethod")?.setValue(i.id),e.get("shippingPrice")?.setValue(i.price),this.basketService.setShippingPrice(i))}}static \u0275fac=function(e){return new(e||n)(p($),p(L))};static \u0275cmp=C({type:n,selectors:[["app-checkout-delivery"]],inputs:{checkoutForm:"checkoutForm"},standalone:!0,features:[b],decls:8,vars:2,consts:[["class","mt-4",3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["cdkStepperPrevious","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],["cdkStepperNext","",1,"btn","btn-primary",3,"disabled"],[1,"fa","fa-angle-right"],[1,"mt-4",3,"formGroup"],["formGroupName","deliveryForm",1,"row"],["class","col-12 col-md-6 form-group",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","form-group"],[1,"form-check"],["type","radio","formControlName","deliveryMethod",1,"form-check-input",3,"change","id","value"],[1,"form-check-label","ms-2","mb-3",3,"for"],[1,"label-description"],[1,"text-muted"]],template:function(e,t){if(e&1&&(v(0,pi,5,2,"div",0),r(1,"div",1)(2,"button",2),m(3,"i",3),d(4," Back to address "),s(),r(5,"button",4),d(6," Go to Review "),m(7,"i",5),s()()),e&2){let o;l("ngIf",t.checkoutForm&&t.deliveryMethods&&t.deliveryMethods.length>0),a(5),l("disabled",t.checkoutForm==null||(o=t.checkoutForm.get("deliveryForm"))==null?null:o.invalid)}},dependencies:[pt,k,ae,_,M,Ct,bt,V,G,z,q,U,fe,Tt],styles:[".form-group[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:1rem}.form-check-input[_ngcontent-%COMP%]{margin-right:.5rem}.form-check-label[_ngcontent-%COMP%]{cursor:pointer;display:block;width:100%;border:1px solid #dee2e6;border-radius:.25rem;padding:1rem;transition:all .2s ease-in-out}.form-check-label[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#007bff}.form-check-input[_ngcontent-%COMP%]:checked + .form-check-label[_ngcontent-%COMP%]{background-color:#e3f2fd;border-color:#007bff}.label-description[_ngcontent-%COMP%]{color:#6c757d;font-size:.9em}strong[_ngcontent-%COMP%]{color:#212529}"]})};var Te=class n{constructor(i,e){this.basketService=i;this.toastr=e}appStepper;createPaymentIntent(){this.basketService.createPaymentIntent().subscribe({next:i=>{console.log("Payment intent response:",{paymentIntentId:i.paymentIntentId,clientSecret:i.clientSecret?.substring(0,20)+"...",hasClientSecret:!!i.clientSecret}),this.appStepper?.next()},error:i=>{this.toastr.error(i.message||"Failed to create payment intent")}})}static \u0275fac=function(e){return new(e||n)(p(L),p(A))};static \u0275cmp=C({type:n,selectors:[["app-checkout-review"]],inputs:{appStepper:"appStepper"},standalone:!0,features:[b],decls:9,vars:1,consts:[[1,"container","mt-4"],[3,"isBasket"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["cdkStepperPrevious","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-angle-right"]],template:function(e,t){e&1&&(r(0,"div",0),m(1,"app-basket-summary",1),s(),r(2,"div",2)(3,"button",3),m(4,"i",4),d(5," Back to delivery "),s(),r(6,"button",5),y("click",function(){return t.createPaymentIntent()}),d(7," Go to Payment "),m(8,"i",6),s()()),e&2&&(a(),l("isBasket",!1))},dependencies:[xt]})};var Nt="basil",ui=function(i){return i===3?"v3":i},Mt="https://js.stripe.com",hi="".concat(Mt,"/").concat(Nt,"/stripe.js"),fi=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,vi=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Ot="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",gi=function(i){return fi.test(i)||vi.test(i)},Ci=function(){for(var i=document.querySelectorAll('script[src^="'.concat(Mt,'"]')),e=0;e<i.length;e++){var t=i[e];if(gi(t.src))return t}return null},Dt=function(i){var e=i&&!i.advancedFraudSignals?"?advancedFraudSignals=false":"",t=document.createElement("script");t.src="".concat(hi).concat(e);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(t),t},bi=function(i,e){!i||!i._registerWrapper||i._registerWrapper({name:"stripe-js",version:"7.4.0",startTime:e})},Y=null,ke=null,xe=null,yi=function(i){return function(e){i(new Error("Failed to load Stripe.js",{cause:e}))}},_i=function(i,e){return function(){window.Stripe?i(window.Stripe):e(new Error("Stripe.js not available"))}},Si=function(i){return Y!==null?Y:(Y=new Promise(function(e,t){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe&&i&&console.warn(Ot),window.Stripe){e(window.Stripe);return}try{var o=Ci();if(o&&i)console.warn(Ot);else if(!o)o=Dt(i);else if(o&&xe!==null&&ke!==null){var c;o.removeEventListener("load",xe),o.removeEventListener("error",ke),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=Dt(i)}xe=_i(e,t),ke=yi(t),o.addEventListener("load",xe),o.addEventListener("error",ke)}catch(h){t(h);return}}),Y.catch(function(e){return Y=null,Promise.reject(e)}))},Ti=function(i,e,t){if(i===null)return null;var o=e[0],c=o.match(/^pk_test/),h=ui(i.version),g=Nt;c&&h!==g&&console.warn("Stripe.js@".concat(h," was loaded on the page, but @stripe/stripe-js@").concat("7.4.0"," expected Stripe.js@").concat(g,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var S=i.apply(void 0,e);return bi(S,t),S},ee,Rt=!1,At=function(){return ee||(ee=Si(null).catch(function(i){return ee=null,Promise.reject(i)}),ee)};Promise.resolve().then(function(){return At()}).catch(function(n){Rt||console.warn(n)});var Pt=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];Rt=!0;var o=Date.now();return At().then(function(c){return Ti(c,e,o)})};var ki=["cardNumber"],xi=["cardExpiry"],Ii=["cardCvc"];function Ei(n,i){if(n&1&&(r(0,"div",10)(1,"div",11)(2,"div",12),m(3,"app-text-input",13),s()(),r(4,"div",14)(5,"div",15)(6,"div",16)(7,"label",17),d(8,"Card Number"),s(),r(9,"div",18),m(10,"div",null,0),s(),r(12,"span",19),d(13),s()()(),r(14,"div",20)(15,"div",16)(16,"label",17),d(17,"Card Expiry"),s(),r(18,"div",18),m(19,"div",null,1),s()()(),r(21,"div",20)(22,"div",16)(23,"label",17),d(24,"Card CVC"),s(),r(25,"div",18),m(26,"div",null,2),s()()()()()),n&2){let e=u();l("formGroup",e.checkoutForm),a(3),l("label","Name on card"),a(10),K(e.cardErrors)}}function wi(n,i){n&1&&m(0,"i",21)}var Ie=class n{constructor(i,e,t,o){this.basketService=i;this.checkoutService=e;this.toastr=t;this.router=o}checkoutForm;cardNumberElement;cardExpiryElement;cardCvcElement;stripe=null;cardNumber;cardExpiry;cardCvc;cardNumberComplete=!1;cardExpiryComplete=!1;cardCvcComplete=!1;cardErrors;loading=!1;initRetryCount=0;maxRetries=20;ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.initializeStripe()},0)}ngOnChanges(i){i.checkoutForm&&i.checkoutForm.currentValue&&!this.stripe&&(this.initRetryCount=0,setTimeout(()=>this.initializeStripe(),100))}initializeStripe(){if(!this.checkoutForm){this.initRetryCount<this.maxRetries&&(this.initRetryCount++,setTimeout(()=>this.initializeStripe(),100));return}if(!this.cardNumberElement?.nativeElement||!this.cardExpiryElement?.nativeElement||!this.cardCvcElement?.nativeElement){this.initRetryCount<this.maxRetries&&(this.initRetryCount++,setTimeout(()=>this.initializeStripe(),100));return}this.initRetryCount=0;let i=this.cardNumberElement.nativeElement,e=this.cardExpiryElement.nativeElement,t=this.cardCvcElement.nativeElement,o=i.parentElement,c=e.parentElement,h=t.parentElement;this.clearElementContent(i),this.clearElementContent(e),this.clearElementContent(t),i.removeAttribute("class"),e.removeAttribute("class"),t.removeAttribute("class"),Pt(pe.stripePublishableKey).then(g=>{this.stripe=g;let S=g?.elements();if(S){let P={base:{fontSize:"16px",color:"#495057",fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',"::placeholder":{color:"#6c757d"}},invalid:{color:"#dc3545"}};this.cardNumber=S.create("cardNumber",{style:P}),this.cardNumber.mount(i),this.cardNumber.on("change",f=>{this.cardNumberComplete=f.complete,f.error?(this.cardErrors=f.error.message,o?.classList.add("has-error"),o?.classList.remove("is-complete")):(this.cardErrors=null,o?.classList.remove("has-error"),f.complete?o?.classList.add("is-complete"):o?.classList.remove("is-complete"))}),this.cardExpiry=S.create("cardExpiry",{style:P}),this.cardExpiry.mount(e),this.cardExpiry.on("change",f=>{this.cardExpiryComplete=f.complete,f.error?(this.cardErrors=f.error.message,c?.classList.add("has-error"),c?.classList.remove("is-complete")):(this.cardErrors=null,c?.classList.remove("has-error"),f.complete?c?.classList.add("is-complete"):c?.classList.remove("is-complete"))}),this.cardCvc=S.create("cardCvc",{style:P}),this.cardCvc.mount(t),this.cardCvc.on("change",f=>{this.cardCvcComplete=f.complete,f.error?(this.cardErrors=f.error.message,h?.classList.add("has-error"),h?.classList.remove("is-complete")):(this.cardErrors=null,h?.classList.remove("has-error"),f.complete?h?.classList.add("is-complete"):h?.classList.remove("is-complete"))})}}).catch(g=>{console.error("Error loading Stripe:",g)})}clearElementContent(i){for(;i.firstChild;)i.removeChild(i.firstChild);i.textContent="",i.innerHTML=""}get paymentFormComplete(){return this.checkoutForm?.get("paymentForm")?.valid&&this.cardNumberComplete&&this.cardExpiryComplete&&this.cardCvcComplete}submitOrder(){return te(this,null,function*(){this.loading=!0;let i=this.basketService.getCurrentBasketValue();if(!i)throw new Error("cannot get basket");try{let e=yield this.createOrder(i),t=yield this.confirmPaymentWithStripe(i);if(t.paymentIntent){this.basketService.deleteBasket(i);let o={state:e};this.router.navigate(["checkout/success"],o)}else this.toastr.error(t.error.message)}catch(e){console.log(e),this.toastr.error(e.message)}finally{this.loading=!1}})}confirmPaymentWithStripe(i){return te(this,null,function*(){if(!i)throw new Error("Basket is null");if(!i.clientSecret)throw new Error("No client secret available");console.log("Confirming payment with:",{paymentIntentId:i.paymentIntentId,clientSecret:i.clientSecret?.substring(0,20)+"..."});let e=this.stripe?.confirmCardPayment(i.clientSecret,{payment_method:{card:this.cardNumber,billing_details:{name:this.checkoutForm?.get("paymentForm")?.get("nameOnCard")?.value}}});if(!e)throw new Error("Problem attempting payment with stripe");return e})}createOrder(i){return te(this,null,function*(){if(!i)throw new Error("Basket is null");let e=this.getOrderToCreate(i);return $e(this.checkoutService.createOrder(e))})}getOrderToCreate(i){let e=this.checkoutForm?.get("deliveryForm")?.get("deliveryMethod")?.value,t=this.checkoutForm?.get("addressForm")?.value;if(!e||!t)throw new Error("Problem with basket");return{basketId:i.id,deliveryMethodId:e,shipToAddress:t}}static \u0275fac=function(e){return new(e||n)(p(L),p($),p(A),p(me))};static \u0275cmp=C({type:n,selectors:[["app-checkout-payment"]],viewQuery:function(e,t){if(e&1&&(oe(ki,5),oe(xi,5),oe(Ii,5)),e&2){let o;ne(o=re())&&(t.cardNumberElement=o.first),ne(o=re())&&(t.cardExpiryElement=o.first),ne(o=re())&&(t.cardCvcElement=o.first)}},inputs:{checkoutForm:"checkoutForm"},standalone:!0,features:[Xe,b],decls:9,vars:3,consts:[["cardNumber",""],["cardExpiry",""],["cardCvc",""],["class","mt-4",3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["cdkStepperPrevious","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fa","fa-angle-right"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"mt-4",3,"formGroup"],[1,"row"],["formGroupName","paymentForm",1,"form-group","col-12"],["formControlName","nameOnCard",3,"label"],[1,"row","mb-3"],[1,"col-6"],[1,"form-group"],[1,"form-label"],[1,"stripe-container"],[1,"text-danger"],[1,"col-3"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,t){e&1&&(v(0,Ei,28,3,"div",3),r(1,"div",4)(2,"button",5),m(3,"i",6),d(4," Back to review "),s(),r(5,"button",7),y("click",function(){return t.submitOrder()}),d(6," Submit order "),m(7,"i",8),v(8,wi,1,0,"i",9),s()()),e&2&&(l("ngIf",t.checkoutForm),a(5),l("disabled",t.loading||!t.paymentFormComplete),a(3),l("ngIf",t.loading))},dependencies:[ge,M,V,G,z,q,U,k,_],styles:[".stripe-container[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.375rem;background-color:#fff;padding:.75rem;min-height:calc(1.5em + .75rem + 2px);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.stripe-container[_ngcontent-%COMP%]:focus-within{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.stripe-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%}.StripeElement[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;color:#495057;font-family:Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}.StripeElement[_ngcontent-%COMP%]:focus{outline:none}.StripeElement--focus[_ngcontent-%COMP%]{outline:none}.StripeElement--invalid[_ngcontent-%COMP%]{color:#dc3545}.StripeElement--complete[_ngcontent-%COMP%]{color:#28a745}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:#495057}.stripe-container.has-error[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 .2rem #dc354540}.stripe-container.is-complete[_ngcontent-%COMP%]{border-color:#28a745}"]})};var Ee=class n{constructor(i,e){this.fb=i;this.accountService=e}checkoutForm;ngOnInit(){this.createCheckoutForm(),this.getAddressFormValues()}createCheckoutForm(){this.checkoutForm=this.fb.group({addressForm:this.fb.group({firstName:[null,x.required],lastName:[null,x.required],street:[null,x.required],city:[null,x.required],state:[null,x.required],zipcode:[null,x.required]}),deliveryForm:this.fb.group({deliveryMethod:[null,x.required],shippingPrice:[null,x.required]}),paymentForm:this.fb.group({nameOnCard:[null,x.required]})})}getAddressFormValues(){this.accountService.getUserAddress().subscribe({next:i=>{i&&this.checkoutForm.get("addressForm")?.patchValue({firstName:i.firstName,lastName:i.lastName,street:i.street,city:i.city,state:i.state,zipcode:i.zipcode})},error:i=>{console.error("Error fetching address",i)}})}static \u0275fac=function(e){return new(e||n)(p(he),p(ue))};static \u0275cmp=C({type:n,selectors:[["app-checkout"]],standalone:!0,features:[b],decls:15,vars:11,consts:[["appStepper",""],[1,"container","mt-5"],[1,"row"],[1,"col-8"],[3,"label","completed"],[3,"checkoutForm"],[3,"label"],[3,"appStepper"],[1,"col-4"]],template:function(e,t){if(e&1&&(r(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-stepper",null,0)(5,"cdk-step",4),m(6,"app-checkout-address",5),s(),r(7,"cdk-step",4),m(8,"app-checkout-delivery",5),s(),r(9,"cdk-step",6),m(10,"app-checkout-review",7),s(),r(11,"cdk-step",4),m(12,"app-checkout-payment",5),s()()(),r(13,"div",8),m(14,"app-order-totals"),s()()()),e&2){let o,c,h,g=rt(4);a(5),l("label","Address")("completed",(o=t.checkoutForm.get("addressForm"))==null?null:o.valid),a(),l("checkoutForm",t.checkoutForm),a(),l("label","Delivery")("completed",(c=t.checkoutForm.get("deliveryForm"))==null?null:c.valid),a(),l("checkoutForm",t.checkoutForm),a(),l("label","Review"),a(),l("appStepper",g),a(),l("label","Payment")("completed",(h=t.checkoutForm.get("paymentForm"))==null?null:h.valid),a(),l("checkoutForm",t.checkoutForm)}},dependencies:[k,yt,kt,ye,ve,St,_e,Se,Te,Ie,M]})};var nn=[{path:"",component:Ee},{path:"success",component:Ce,canActivate:[gt],data:{breadcrumb:"Success"}}];export{nn as routes};
